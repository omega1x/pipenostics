<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Minenergo-325. Trace thermal-hydraulic regime for linear segment of district heating network — m325traceline • pipenostics</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Minenergo-325. Trace thermal-hydraulic regime for linear segment of district heating network — m325traceline"><meta name="description" content="Trace values of thermal-hydraulic regime (temperature, pressure,
 flow_rate, and other) along the adjacent linear segments of pipeline using
 norms of heat loss values prescribed by
 Minenergo Order 325."><meta property="og:description" content="Trace values of thermal-hydraulic regime (temperature, pressure,
 flow_rate, and other) along the adjacent linear segments of pipeline using
 norms of heat loss values prescribed by
 Minenergo Order 325."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pipenostics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pipenostics.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/FailureEstimation.html">Pipeline Failure Estimation</a></li>
    <li><a class="dropdown-item" href="../articles/RegimeTracing.html">District Heating Regime Tracing</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/omega1x/pipenostics/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Minenergo-325. Trace thermal-hydraulic regime for linear segment of district heating network</h1>
      <small class="dont-index">Source: <a href="https://github.com/omega1x/pipenostics/blob/HEAD/R/m325traceline.R" class="external-link"><code>R/m325traceline.R</code></a></small>
      <div class="d-none name"><code>m325traceline.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Trace values of thermal-hydraulic regime (temperature, pressure,
 flow_rate, and other) along the adjacent linear segments of pipeline using
 norms of heat loss values prescribed by
 <a href="https://docs.cntd.ru/document/902148459" class="external-link">Minenergo Order 325</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">m325traceline</span><span class="op">(</span></span>
<span>  temperature <span class="op">=</span> <span class="fl">130</span>,</span>
<span>  pressure <span class="op">=</span> <span class="fu"><a href="mpa_kgf.html">mpa_kgf</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  flow_rate <span class="op">=</span> <span class="fl">250</span>,</span>
<span>  g <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  a <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  d <span class="op">=</span> <span class="fl">711</span>,</span>
<span>  wth <span class="op">=</span> <span class="fl">12.7</span>,</span>
<span>  len <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">530</span>, <span class="fl">300</span>, <span class="fl">350</span><span class="op">)</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">1986</span>,</span>
<span>  insulation <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  laying <span class="op">=</span> <span class="st">"underground"</span>,</span>
<span>  beta <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  exp5k <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  roughness <span class="op">=</span> <span class="fl">0.006</span>,</span>
<span>  inlet <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  outlet <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  elev_tol <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"romeo"</span>,</span>
<span>  forward <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  absg <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  strict_sizes <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-temperature">temperature<a class="anchor" aria-label="anchor" href="#arg-temperature"></a></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Sensor-measured temperature of heat
carrier (water)
inside the pipe sensor-measured at the inlet
(forward tracing) or at the outlet (backward tracing) of path, [<em>°C</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkNumber.html" class="external-link">assert_number</a></code>.</p></dd>


<dt id="arg-pressure">pressure<a class="anchor" aria-label="anchor" href="#arg-pressure"></a></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute" class="external-link">absolute
pressure</a> of heat carrier (water) sensor-measured at the inlet
(forward tracing) or at the outlet (backward tracing) of path,
[<em>MPa</em>].Type: <code><a href="https://mllg.github.io/checkmate/reference/checkNumber.html" class="external-link">assert_number</a></code>.</p></dd>


<dt id="arg-flow-rate">flow_rate<a class="anchor" aria-label="anchor" href="#arg-flow-rate"></a></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Amount of heat carrier (water)
sensor-measured at the inlet (forward tracing) or at the outlet (backward
tracing) of path, [<em>ton/h</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkNumber.html" class="external-link">assert_number</a></code>.</p></dd>


<dt id="arg-g">g<a class="anchor" aria-label="anchor" href="#arg-g"></a></dt>
<dd><p>amount of heat carrier discharge to network for each pipe segment in the
tracing path enumerated along the direction of flow. If flag <code>absg</code>
is <code>TRUE</code> then they treat argument <code>g</code> as absolute value in
[<em>ton/h</em>], otherwise they do as percentage of flow_rate in the
pipe segment.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-a">a<a class="anchor" aria-label="anchor" href="#arg-a"></a></dt>
<dd><p>heat carrier (water) volume loss factor of cylindrical pipe,
[<em>h⁻¹</em>]. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-d">d<a class="anchor" aria-label="anchor" href="#arg-d"></a></dt>
<dd><p>nominal (outside) diameters of subsequent pipes in tracing path that are
enumerated along the direction of flow, [<em>mm</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-wth">wth<a class="anchor" aria-label="anchor" href="#arg-wth"></a></dt>
<dd><p>nominal wall thickness of pipe, [<em>mm</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-len">len<a class="anchor" aria-label="anchor" href="#arg-len"></a></dt>
<dd><p>length of subsequent pipes in tracing path that are enumerated
along the direction of flow, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>year when pipe is put in operation after laying or total overhaul for
each pipe in tracing path enumerated along the direction of flow.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkIntegerish.html" class="external-link">assert_integerish</a></code>.</p></dd>


<dt id="arg-insulation">insulation<a class="anchor" aria-label="anchor" href="#arg-insulation"></a></dt>
<dd><p>insulation that covers the exterior of pipe:</p><dl><dt><code>0</code></dt>
<dd><p>no insulation</p></dd>

  <dt><code>1</code></dt>
<dd><p>foamed polyurethane or analogue</p></dd>

  <dt><code>2</code></dt>
<dd><p>polymer concrete</p></dd>


</dl><p>for each pipe in tracing path enumerated along the direction of flow.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkNumeric.html" class="external-link">assert_numeric</a></code> and
<code><a href="https://mllg.github.io/checkmate/reference/checkSubset.html" class="external-link">assert_subset</a></code>.</p></dd>


<dt id="arg-laying">laying<a class="anchor" aria-label="anchor" href="#arg-laying"></a></dt>
<dd><p>type of pipe laying depicting the position of pipe in space:</p><ul><li><p><code>air</code></p></li>
<li><p><code>channel</code></p></li>
<li><p><code>room</code></p></li>
<li><p><code>tunnel</code></p></li>
<li><p><code>underground</code></p></li>
</ul><p>for each pipe in tracing path enumerated along the direction of flow.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code> and
<code><a href="https://mllg.github.io/checkmate/reference/checkSubset.html" class="external-link">assert_subset</a></code>.</p></dd>


<dt id="arg-beta">beta<a class="anchor" aria-label="anchor" href="#arg-beta"></a></dt>
<dd><p>logical indicator: should they consider additional heat loss of fittings?
Logical value for each pipe in tracing path enumerated along the direction
of flow. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkLogical.html" class="external-link">assert_logical</a></code>.</p></dd>


<dt id="arg-exp-k">exp5k<a class="anchor" aria-label="anchor" href="#arg-exp-k"></a></dt>
<dd><p>logical indicator for regime of pipe: is pipe operated more that
<code>5000</code> hours per year? Logical value for each pipe in tracing path
enumerated along the direction of flow.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkLogical.html" class="external-link">assert_logical</a></code>.</p></dd>


<dt id="arg-roughness">roughness<a class="anchor" aria-label="anchor" href="#arg-roughness"></a></dt>
<dd><p>roughness of internal wall for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-inlet">inlet<a class="anchor" aria-label="anchor" href="#arg-inlet"></a></dt>
<dd><p>elevation of pipe inlet for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-outlet">outlet<a class="anchor" aria-label="anchor" href="#arg-outlet"></a></dt>
<dd><p>elevation of pipe outlet for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-elev-tol">elev_tol<a class="anchor" aria-label="anchor" href="#arg-elev-tol"></a></dt>
<dd><p>maximum allowed discrepancy between adjacent outlet and inlet elevations of
two subsequent pipes in the traced path, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkNumber.html" class="external-link">assert_number</a></code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>method of determining <em>Darcy friction factor</em></p><ul><li><p><code>romeo</code></p></li>
<li><p><code>vatankhah</code></p></li>
<li><p><code>buzzelli</code></p></li>
</ul><p>Type: <code><a href="https://mllg.github.io/checkmate/reference/checkChoice.html" class="external-link">assert_choice</a></code>. For more details see
<code><a href="dropp.html">dropp</a></code>.</p></dd>


<dt id="arg-forward">forward<a class="anchor" aria-label="anchor" href="#arg-forward"></a></dt>
<dd><p>tracing direction flag: is it a forward direction of tracing?
If <code>FALSE</code> the backward tracing is performed.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkFlag.html" class="external-link">assert_flag</a></code>.</p></dd>


<dt id="arg-absg">absg<a class="anchor" aria-label="anchor" href="#arg-absg"></a></dt>
<dd><p>whether argument <code>g</code> (amount of heat carrier discharge to network) is
an absolute value in [<em>ton/h</em>] (<code>TRUE</code>) or is it a percentage
of flow rate in the pipe segment (<code>FALSE</code>)?
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkFlag.html" class="external-link">assert_flag</a></code>.</p></dd>


<dt id="arg-strict-sizes">strict_sizes<a class="anchor" aria-label="anchor" href="#arg-strict-sizes"></a></dt>
<dd><p>verify diameter and wall thickness with the actual pipe specifications
produced. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkFlag.html" class="external-link">assert_flag</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></code> containing results (detailed log) of tracing for each
  pipe in tracing path enumerated along the direction of flow:</p><dl><dt><code>temperature</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
       carrier (water), [<em>°C</em>].
       Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>

    <dt><code>pressure</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
       carrier (water) for each pipe in tracing path enumerated along the
       direction of flow, [<em>MPa</em>].
       Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>

    <dt><code>flow_rate</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
       carrier (water) for each pipe in tracing path enumerated along the
       direction of flow, [<em>ton/h</em>].
       Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>

    <dt><code>loss</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative specific heat
      loss power for each pipe in tracing path enumerated along the direction
      of flow, [<em>kcal/m/h</em>].
      Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>

    <dt><code>flux</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative heat flux for each
      pipe in tracing path enumerated along the direction of flow,
      [<em>W/m²</em>]. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>

    <dt><code>Q</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative heat loss for each
      pipe in tracing path enumerated along the direction of flow per day,
      [<em>kcal</em>]. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


</dl><p>Type: <code><a href="https://mllg.github.io/checkmate/reference/checkList.html" class="external-link">assert_list</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>They consider only simple tracing paths which do not contain rings and any
 kind of parallelization. At the same time bidirectional (forward and
 backward) tracing is possible in accordance with sensor position. They also
 may consider discharges to network at the inlet of each pipeline segment as
 an approximation of actual forks of flows.</p>
<p>Relevant illustration of the adopted assumptions for 4-segment tracing path
 is depicted on the next figure.</p>
<p><img src="figures/m325regtrace.png" alt=""></p>
<p>They make additional check for consistency of <code>inlet</code> and <code>outlet</code>
 values for subsequent pipe segments. Discrepancy of appropriate elevations
 cannot be more than <code>elev_tol</code>.</p>
<p>They also may consider some normative volume loss of heat carrier (water) by
 tuning volume loss factor <em>a</em> in range <em>0.0 – 0.0025</em>
 <em>h⁻¹</em>.</p>
<p>Optional verification of pipe diameters and wall thicknesses is performed
 against <code><a href="b36pipedata.html">b36pipedata</a></code> data.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Regime tracing:
<code><a href="dropg.html">dropg</a>()</code>,
<code><a href="dropp.html">dropp</a>()</code>,
<code><a href="dropt.html">dropt</a>()</code>,
<code><a href="m325tracebw.html">m325tracebw</a>()</code>,
<code><a href="m325tracefw.html">m325tracefw</a>()</code>,
<code><a href="tracebw.html">tracebw</a>()</code>,
<code><a href="tracefw.html">tracefw</a>()</code>,
<code><a href="traceline.html">traceline</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://omega1x.github.io/pipenostics/">pipenostics</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Consider 4-segment tracing path depicted.</span></span></span>
<span class="r-in"><span><span class="co"># First, let sensor readings for forward tracing:</span></span></span>
<span class="r-in"><span><span class="va">t_fw</span> <span class="op">&lt;-</span> <span class="fl">130</span>  <span class="co"># [°C]</span></span></span>
<span class="r-in"><span><span class="va">p_fw</span> <span class="op">&lt;-</span> <span class="fu"><a href="mpa_kgf.html">mpa_kgf</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fl">.588399</span>, <span class="fu"><a href="mpa_kgf.html">mpa_kgf</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span>  <span class="co"># [MPa]</span></span></span>
<span class="r-in"><span><span class="va">g_fw</span> <span class="op">&lt;-</span> <span class="fl">250</span>  <span class="co"># [ton/h]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let discharges to network for each pipeline segment are somehow determined</span></span></span>
<span class="r-in"><span><span class="co"># as</span></span></span>
<span class="r-in"><span><span class="va">discharges</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span>, <span class="fl">10</span><span class="op">)</span>  <span class="co"># [ton/h]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Then the calculated regime (red squares) for forward tracing is</span></span></span>
<span class="r-in"><span><span class="fu">m325traceline</span><span class="op">(</span><span class="va">t_fw</span>, <span class="va">p_fw</span>, <span class="va">g_fw</span>, <span class="va">discharges</span>, forward <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $temperature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 129.1698 128.4075 127.9377 127.3039</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $pressure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5877977 0.5873084 0.5870757 0.5868732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flow_rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 250 240 220 190</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $loss</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 352.2900 351.4092 350.6004 350.1019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flux</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 183.4259 182.9672 182.5461 182.2866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Q</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5072976 4469925 2524323 2940856</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Next consider values of traced regime as sensor readings for backward</span></span></span>
<span class="r-in"><span><span class="co"># tracing:</span></span></span>
<span class="r-in"><span><span class="va">t_bw</span> <span class="op">&lt;-</span> <span class="fl">127.3367</span>  <span class="co"># [°C]</span></span></span>
<span class="r-in"><span><span class="va">p_bw</span> <span class="op">&lt;-</span> <span class="fl">.5870330</span>  <span class="co"># [MPa]</span></span></span>
<span class="r-in"><span><span class="va">g_bw</span> <span class="op">&lt;-</span> <span class="fl">190</span>  <span class="co"># [ton/h]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Then the calculated regime (red squares) for backward tracing is</span></span></span>
<span class="r-in"><span><span class="va">regime_bw</span> <span class="op">&lt;-</span> <span class="fu">m325traceline</span><span class="op">(</span><span class="va">t_bw</span>, <span class="va">p_bw</span>, <span class="va">g_bw</span>, <span class="va">discharges</span>, forward <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">regime_bw</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $temperature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 130.0282 129.1997 128.4388 127.9696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $pressure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5885598 0.5879580 0.5874684 0.5872356</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flow_rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 250 250 240 220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $loss</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 351.4409 350.6336 350.1357 349.4642</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flux</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 182.9837 182.5634 182.3042 181.9546</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Q</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5060748 4460059 2520977 2935500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let compare sensor readings with backward tracing results:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">regime_bw</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">lambda</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">val</span>, <span class="va">constraint</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">val</span>, <span class="va">constraint</span>, <span class="va">constraint</span> <span class="op">-</span> <span class="va">val</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">constraint</span> <span class="op">-</span> <span class="va">val</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span><span class="op">/</span><span class="va">constraint</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">first</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="fu">lambda</span><span class="op">(</span><span class="va">temperature</span><span class="op">[</span><span class="va">first</span><span class="op">]</span>, <span class="va">t_fw</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu">lambda</span><span class="op">(</span><span class="va">pressure</span><span class="op">[</span><span class="va">first</span><span class="op">]</span>,    <span class="va">p_fw</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu">lambda</span><span class="op">(</span><span class="va">flow_rate</span><span class="op">[</span><span class="va">first</span><span class="op">]</span>,   <span class="va">g_fw</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature"</span>, <span class="st">"pressure"</span>, <span class="st">"flow_rate"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sensor.value"</span>, <span class="st">"traced.value"</span>, <span class="st">"abs.discr"</span>, <span class="st">"rel.discr"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             sensor.value traced.value     abs.discr  rel.discr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> temperature  130.0281773   130.000000 -0.0281772695 0.02167482</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> pressure       0.5885598     0.588399 -0.0001607797 0.02732495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> flow_rate    250.0000000   250.000000  0.0000000000 0.00000000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To address the problem of possible norm losses of the heat carrier,</span></span></span>
<span class="r-in"><span><span class="co"># they could roughly define the leaks as follows:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * maximum value prescribed to heat carrier loss factor, [h⁻¹],</span></span></span>
<span class="r-in"><span><span class="co">#   multiplied by heating season relative duration:</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">0.0025</span> <span class="op">*</span> <span class="op">(</span> <span class="op">(</span><span class="fl">365</span> <span class="op">-</span> <span class="fl">90</span><span class="op">)</span><span class="op">/</span><span class="fl">365</span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * length of subsequent pipes, [m]:</span></span></span>
<span class="r-in"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">530</span>, <span class="fl">300</span>, <span class="fl">350</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * nominal (outside) diameters of subsequent pipes, [m]:</span></span></span>
<span class="r-in"><span><span class="va">D</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="fl">700</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e-3</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * average year volumes of heat carrier (no heat carrier for 90 days in</span></span></span>
<span class="r-in"><span><span class="co">#   summer), [m³]</span></span></span>
<span class="r-in"><span><span class="va">V</span> <span class="op">&lt;-</span> <span class="va">pi</span> <span class="op">*</span> <span class="va">D</span><span class="op">^</span><span class="fl">2</span> <span class="op">/</span> <span class="fl">4</span> <span class="op">*</span> <span class="va">l</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * finally they get,  [ton/h]:</span></span></span>
<span class="r-in"><span><span class="va">discharges</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">*</span> <span class="va">V</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/drop.html" class="external-link">drop</a></span><span class="op">(</span><span class="fu">iapws</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/iapws/man/if97.html" class="external-link">if97</a></span><span class="op">(</span><span class="st">"rho"</span>, <span class="fu"><a href="mpa_kgf.html">mpa_kgf</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>, <span class="fu"><a href="kelvin.html">k_c</a></span><span class="op">(</span><span class="fl">130</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e-3</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * and the calculated regime (red squares) for forward tracing becomes</span></span></span>
<span class="r-in"><span><span class="fu">m325traceline</span><span class="op">(</span>g <span class="op">=</span> <span class="va">discharges</span>, forward <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $temperature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 129.1685 128.4344 128.0194 127.5352</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $pressure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5877996 0.5872720 0.5869740 0.5866271</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flow_rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 249.5933 249.2341 249.0308 248.7936</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $loss</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 352.2900 351.4077 350.6289 350.1886</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flux</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 183.4259 182.9665 182.5610 182.3317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Q</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5072976 4469906 2524528 2941584</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's compare it with more formal calculations:</span></span></span>
<span class="r-in"><span><span class="fu">m325traceline</span><span class="op">(</span>a <span class="op">=</span> <span class="va">a</span>, forward <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $temperature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 129.1685 128.4346 128.0196 127.5355</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $pressure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5877995 0.5872718 0.5869737 0.5866266</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flow_rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 249.6099 249.2651 249.0697 248.8418</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $loss</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 352.2900 351.4078 350.6291 350.1888</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flux</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 183.4259 182.9665 182.5611 182.3318</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Q</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5072976 4469907 2524529 2941586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yuri Possokhov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

