<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Minenergo-325. Trace forwards thermal-hydraulic regime for district heating
 network — m325tracefw • pipenostics</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Minenergo-325. Trace forwards thermal-hydraulic regime for district heating
 network — m325tracefw"><meta property="og:description" content="Trace values of thermal-hydraulic regime (temperature, pressure,
 consumption) in the bunched pipeline along the flow direction using norms of
 heat flux values prescribed by
 Minenergo Order 325."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pipenostics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/omega1x/pipenostics/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Minenergo-325. Trace forwards thermal-hydraulic regime for district heating
 network</h1>
    <small class="dont-index">Source: <a href="https://github.com/omega1x/pipenostics/blob/HEAD/R/m325tracefw.R" class="external-link"><code>R/m325tracefw.R</code></a></small>
    <div class="hidden name"><code>m325tracefw.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Trace values of thermal-hydraulic regime (temperature, pressure,
 consumption) in the bunched pipeline along the flow direction using norms of
 heat flux values prescribed by
 <a href="http://docs.cntd.ru/document/902148459" class="external-link">Minenergo Order 325</a>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">m325tracefw</span><span class="op">(</span></span>
<span>  sender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  acceptor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  temperature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="cn">NA_real_</span><span class="op">)</span>,</span>
<span>  pressure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">pipenostics</span><span class="fu">::</span><span class="fu"><a href="mpa_kgf.html">mpa_kgf</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>, <span class="cn">NA_real_</span><span class="op">)</span>,</span>
<span>  consumption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="cn">NA_real_</span><span class="op">)</span>,</span>
<span>  d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  len <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="fl">72.446</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="fl">1986</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  insulation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  laying <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="st">"tunnel"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  exp5k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  roughness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  inlet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  outlet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  elev_tol <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"romeo"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  csv <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"m325tracefw.csv"</span>,</span>
<span>  maxcores <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sender</dt>
<dd><p>identifier of the node which heat carrier flows out.
Type: any type that can be painlessly coerced to character by
<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></code>.</p></dd>


<dt>acceptor</dt>
<dd><p>identifier of the node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique for every row.
Type: any type that can be painlessly coerced to character by
<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></code>.</p></dd>


<dt>temperature</dt>
<dd><p><em>snapshot of thermal-hydraulic regime state</em>: temperature of heat carrier
(water) sensor-measured on the root node, [<em>°C</em>].
Type: <code>assert_double</code>.
Use <code>NA_float_</code>s for nodes without temperature sensor.</p></dd>


<dt>pressure</dt>
<dd><p><em>snapshot of thermal-hydraulic regime state</em>: sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute" class="external-link">absolute pressure</a>
of heat carrier (water) inside the pipe (i.e. acceptor's incoming edge),
[<em>MPa</em>].
Type: <code>assert_double</code>.
Use <code>NA_float_</code>s for nodes without pressure sensor.</p></dd>


<dt>consumption</dt>
<dd><p><em>snapshot of thermal-hydraulic regime state</em>:
sensor-measured amount of heat carrier (water) on root node that is
transferred by pipe (i.e. acceptor's incoming edge) during a period,
[<em>ton/hour</em>].
Type: <code>assert_double</code>.
Use <code>NA_float_</code>s for nodes without consumption sensor.</p></dd>


<dt>d</dt>
<dd><p>internal diameter of pipe (i.e.diameter of acceptor's incoming edge),
[<em>mm</em>].
Type: <code>assert_double</code>.</p></dd>


<dt>len</dt>
<dd><p>pipe length (i.e. length of acceptor's incoming edge), [<em>m</em>].
Type: <code>assert_double</code>.</p></dd>


<dt>year</dt>
<dd><p>year when the pipe (i.e. acceptor's incoming edge) is put in operation
after laying or total overhaul.
Type: <code>assert_integerish</code>.</p></dd>


<dt>insulation</dt>
<dd><p>identifier of insulation that covers the exterior of pipe (i.e. acceptor's
incoming edge):</p><dl><dt><code>0</code></dt>
<dd><p>no insulation</p></dd>

   <dt><code>1</code></dt>
<dd><p>foamed polyurethane or analogue</p></dd>

   <dt><code>2</code></dt>
<dd><p>polymer concrete</p></dd>

 
</dl><p>Type: <code>assert_subset</code>.</p></dd>


<dt>laying</dt>
<dd><p>type of pipe laying depicting the position of pipe in space. Only five
types of pipe laying are considered:</p><ul><li><p><code>air</code>,</p></li>
<li><p><code>channel</code>,</p></li>
<li><p><code>room</code>,</p></li>
<li><p><code>tunnel</code>,</p></li>
<li><p><code>underground</code>.</p></li>
</ul><p>Type: <code>assert_subset</code>.</p></dd>


<dt>beta</dt>
<dd><p>logical indicator: should they consider additional heat losses of fittings
located on this pipe (i.e. acceptor's incoming edge)?
Type: <code>assert_logical</code>.</p></dd>


<dt>exp5k</dt>
<dd><p>logical indicator for regime of pipe (i.e. acceptor's incoming edge): if
<code>TRUE</code> pipe is operated more that <code>5000</code> hours per year.
Type: <code>assert_logical</code>.</p></dd>


<dt>roughness</dt>
<dd><p>roughness of internal wall of pipe (i.e. acceptor's incoming edge),
[<em>m</em>].
Type: <code>assert_double</code>.</p></dd>


<dt>inlet</dt>
<dd><p>elevation of pipe inlet, [<em>m</em>].
Type: <code>assert_double</code>.</p></dd>


<dt>outlet</dt>
<dd><p>elevation of pipe outlet, [<em>m</em>].
Type: <code>assert_double</code>.</p></dd>


<dt>elev_tol</dt>
<dd><p>maximum allowed discrepancy between adjacent outlet and inlet elevations of
two subsequent pipes in the traced path, [<em>m</em>].
Type: <code>assert_number</code>.</p></dd>


<dt>method</dt>
<dd><p>method of determining <em>Darcy friction factor</em>:</p><ul><li><p><code>romeo</code></p></li>
<li><p><code>vatankhan</code></p></li>
<li><p><code>buzelli</code></p></li>
</ul><p>Type: <code>assert_choice</code>.
For more details see <code><a href="dropp.html">dropp</a></code>.</p></dd>


<dt>verbose</dt>
<dd><p>logical indicator: should they watch tracing process on console?
Type: <code>assert_flag</code>.</p></dd>


<dt>csv</dt>
<dd><p>logical indicator: should they incrementally dump results to <em>csv</em>-file
while tracing?
Type: <code>assert_flag</code>.</p></dd>


<dt>file</dt>
<dd><p>name of <em>csv</em>-file which they dump results to.
Type: <code>assert_character</code> of length 1 that can be used safely
to create a file and write to it.</p></dd>


<dt>maxcores</dt>
<dd><p>maximum cores of CPU to use in parallel processing.
Type: <code>assert_count</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>data.frame</code> containing results of tracing in
   long format
   (<a href="https://en.wikipedia.org/wiki/Wide_and_narrow_data" class="external-link">narrow format</a>)
   mostly like it returned by function <code><a href="m325tracebw.html">m325tracebw</a></code>:</p>
<p></p>
<dl><dt><code>node</code></dt>
<dd><p>identifier of the node for which regime parameters is calculated.
       Values in this vector are identical to those in argument <code>acceptor</code>.
       Type: <code>assert_character</code>.</p></dd>


    <dt><code>tracing</code></dt>
<dd><p>identifiers of nodes from which regime parameters are
      traced for the given node. Identifier <code>sensor</code> is used when
      values of regime parameters for the node are sensor readings.
      Type: <code>assert_character</code>.</p></dd>


    <dt><code>backward</code></dt>
<dd><p>identifier of tracing direction. It constantly equals to <code>FALSE</code>.
      Type: <code>assert_logical</code>.</p></dd>


    <dt><code>aggregation</code></dt>
<dd><p>aggregation method associated with values of calculated temperature or
      pressure in <code>data.frame</code>'s row for the node. For forward tracing
      the only option is <code>identity</code>.
      Type: <code>assert_character</code>.</p></dd>


   <dt><code>temperature</code></dt>
<dd><p><em>snapshot of thermal-hydraulic regime state</em>: traced temperature of heat
     carrier (water) that is associated with the node, [<em>°C</em>]
     Type: <code>assert_double</code>.</p></dd>


   <dt><code>pressure</code></dt>
<dd><p><em>snapshot of thermal-hydraulic regime state</em>: traced pressure of heat
     carrier (water) that is associated with the node, [<em>MPa</em>]
     Type: <code>assert_double</code>.</p></dd>


   <dt><code>consumption</code></dt>
<dd><p><em>snapshot of thermal-hydraulic regime state</em>: traced pressure of heat
     carrier (water) that is associated with the node, [<em>ton/hour</em>]
     Type: <code>assert_double</code>.</p></dd>


   <dt><code>job</code></dt>
<dd><p>value of tracing step counter. For forward tracing value of <code>job</code>
     counts the number of traced paths from root node.
     Type: <code>assert_integer</code>.</p></dd>


 
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The calculated (values of) regime may be considered as representation of
 district heating process in conditions of hypothetically perfect
 technical state of pipe walls and insulation.</p>
<p>They consider the topology of district heating network much similar to
 <code><a href="m325testbench.html">m325testbench</a></code>:</p>
<p><img src="figures/m325tracefw.png" alt=""></p>
<p>Tracing starts from sensor-equipped root node and goes forward, i.e along
 the flow direction. Function <code><a href="m325traceline.html">m325traceline</a></code> serves under the
 hood for tracing identified linear segments from root node to every
 terminal node. Hence they only need root node to be equipped with sensors.
 Sensors at other nodes are redundant in forward tracing, since the tracing
 algorithm by no means consider them for tracing.</p>
<p>Moreover in the forward tracing algorithm they assume the flow of heat carrier is
 distributed proportionally to the cross-sectional area of the outgoing
 pipeline. Actually, a lot of reasons may cause significant deviations from
 this assumption. As a result, the sequence of paired backward/forward
 tracing may be divergent for regime parameters.</p>
<p>Though some input arguments are natively vectorized their individual values
 all relate to common part of district heating network, i.e. associated with
 common object. It is due to isomorphism between vector representation and
 directed graph of this network. For more details of isomorphic topology
 description see <code><a href="m325testbench.html">m325testbench</a></code>.</p>
<p>They are welcome to couple the algorithm with functionality of data.table.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other Regime tracing: 
<code><a href="m325tracebwm.html">m325tracebwm</a>()</code>,
<code><a href="m325tracebw.html">m325tracebw</a>()</code>,
<code><a href="m325traceline.html">m325traceline</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Minimum two nodes should be in district heating network graph:</span></span></span>
<span class="r-in"><span><span class="fu">m325tracefw</span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   node tracing backward aggregation temperature  pressure consumption job</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1  sensor    FALSE    identity    70.00000 0.5883990          20   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    2       1    FALSE    identity    69.71603 0.5813153          20   1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#   node  tracing backward aggregation temperature  pressure consumption job</span></span></span>
<span class="r-in"><span><span class="co"># 1    1 sensor    FALSE    identity    70.00000 0.5883990          20   0</span></span></span>
<span class="r-in"><span><span class="co"># 2    2      1    FALSE    identity    69.71603 0.5813153          20   1</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example with the test bench:</span></span></span>
<span class="r-in"><span><span class="va">nx</span> <span class="op">&lt;-</span> <span class="fu">pipenostics</span><span class="fu">::</span><span class="va"><a href="m325testbench.html">m325testbench</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># avoid using numeric identifiers for nodes:</span></span></span>
<span class="r-in"><span><span class="va">nx</span><span class="op">$</span><span class="va">sender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="va">nx</span><span class="op">$</span><span class="va">sender</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nx</span><span class="op">$</span><span class="va">acceptor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="va">nx</span><span class="op">$</span><span class="va">acceptor</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Alter units:</span></span></span>
<span class="r-in"><span><span class="va">nx</span><span class="op">$</span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fl">1e3</span> <span class="op">*</span> <span class="va">nx</span><span class="op">$</span><span class="va">d</span>  <span class="co"># convert [m] to [mm]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Perform backward tracing to get regime on root node:</span></span></span>
<span class="r-in"><span><span class="va">bw_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"m325tracebw"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">nx</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Put the traced values to the root node of the test bench:</span></span></span>
<span class="r-in"><span><span class="va">root_node_idx</span> <span class="op">&lt;-</span> <span class="fl">12</span></span></span>
<span class="r-in"><span><span class="va">root_node</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="va">root_node_idx</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">regime_param</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature"</span>, <span class="st">"pressure"</span>, <span class="st">"consumption"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nx</span><span class="op">[</span><span class="va">root_node_idx</span>, <span class="va">regime_param</span><span class="op">]</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">bw_report</span>,</span></span>
<span class="r-in"><span>         <span class="va">node</span> <span class="op">==</span> <span class="va">root_node</span> <span class="op">&amp;</span> <span class="va">aggregation</span> <span class="op">==</span> <span class="st">"median"</span>,</span></span>
<span class="r-in"><span>         <span class="va">regime_param</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">root_node</span>, <span class="va">root_node_idx</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Trace the test bench forward for the first time:</span></span></span>
<span class="r-in"><span><span class="va">fw_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"m325tracefw"</span>,</span></span>
<span class="r-in"><span>                     <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">nx</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, elev_tol <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's compare traced regime at terminal nodes back to test bench:</span></span></span>
<span class="r-in"><span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">bw_report</span>, <span class="va">fw_report</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">node</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">nx</span>, <span class="op">!</span><span class="op">(</span><span class="va">acceptor</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">sender</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">acceptor</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>    <span class="va">aggregation</span> <span class="op">==</span> <span class="st">"identity"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">regime_delta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">report</span>, <span class="va">backward</span>, <span class="va">regime_param</span><span class="op">)</span> <span class="op">-</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">report</span>, <span class="op">!</span><span class="va">backward</span>, <span class="va">regime_param</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">regime_delta</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   temperature      pressure   consumption </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -4.640201e-01 -5.208802e-03 -5.465713e-16 </span>
<span class="r-in"><span><span class="co"># temperature      pressure   consumption</span></span></span>
<span class="r-in"><span><span class="co"># -4.640201e-01 -5.208802e-03 -5.465713e-16</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">regime_delta</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">regime_delta</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Yuri Possokhov.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

