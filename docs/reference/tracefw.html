<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Massively trace forwards thermal-hydraulic regime for district heating network — tracefw • pipenostics</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Massively trace forwards thermal-hydraulic regime for district heating network — tracefw"><meta name="description" content="Trace values of thermal-hydraulic regime (temperature, pressure,
 flow rate, and other) in the bunched pipeline along the flow direction using
 user-provided values of specific heat loss power."><meta property="og:description" content="Trace values of thermal-hydraulic regime (temperature, pressure,
 flow rate, and other) in the bunched pipeline along the flow direction using
 user-provided values of specific heat loss power."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pipenostics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pipenostics.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/FailureEstimation.html">Pipeline Failure Estimation</a></li>
    <li><a class="dropdown-item" href="../articles/RegimeTracing.html">District Heating Regime Tracing</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/omega1x/pipenostics/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Massively trace forwards thermal-hydraulic regime for district heating network</h1>
      <small class="dont-index">Source: <a href="https://github.com/omega1x/pipenostics/blob/HEAD/R/tracefw.R" class="external-link"><code>R/tracefw.R</code></a></small>
      <div class="d-none name"><code>tracefw.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Trace values of thermal-hydraulic regime (temperature, pressure,
 flow rate, and other) in the bunched pipeline along the flow direction using
 user-provided values of <em>specific heat loss power</em>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tracefw</span><span class="op">(</span></span>
<span>  sender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  acceptor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  temperature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="cn">NA_real_</span><span class="op">)</span>,</span>
<span>  pressure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.588399</span>, <span class="cn">NA_real_</span><span class="op">)</span>,</span>
<span>  flow_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="cn">NA_real_</span><span class="op">)</span>,</span>
<span>  d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>  wth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  len <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">72.446</span>, <span class="fl">72.446</span><span class="op">)</span>,</span>
<span>  loss <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">78.4</span>, <span class="fl">78.4</span><span class="op">)</span>,</span>
<span>  roughness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">0.001</span><span class="op">)</span>,</span>
<span>  inlet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  outlet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  elev_tol <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"romeo"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  csv <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"tracefw.csv"</span>,</span>
<span>  use_cluster <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sender">sender<a class="anchor" aria-label="anchor" href="#arg-sender"></a></dt>
<dd><p>identifier of the node which heat carrier flows out.
Type: any type that can be painlessly coerced to character by
<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></code>.</p></dd>


<dt id="arg-acceptor">acceptor<a class="anchor" aria-label="anchor" href="#arg-acceptor"></a></dt>
<dd><p>identifier of the node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique for every row.
Type: any type that can be painlessly coerced to character by
<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></code>.</p></dd>


<dt id="arg-temperature">temperature<a class="anchor" aria-label="anchor" href="#arg-temperature"></a></dt>
<dd><p>sensor-measured temperature of heat carrier (water) sensor-measured on
the root node, [<em>°C</em>].
Use <code>NA_float_</code>s for nodes without temperature sensor.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-pressure">pressure<a class="anchor" aria-label="anchor" href="#arg-pressure"></a></dt>
<dd><p>sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute" class="external-link">
 absolute pressure</a> of heat carrier (water) inside the pipe on the root
node, [<em>MPa</em>]. Use <code>NA_float_</code>s for nodes without pressure
sensor. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-flow-rate">flow_rate<a class="anchor" aria-label="anchor" href="#arg-flow-rate"></a></dt>
<dd><p>sensor-measured amount of heat carrier (water) on root node that is
transferred by pipe during a period, [<em>ton/h</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.
Use <code>NA_float_</code>s for nodes without flow rate sensor.</p></dd>


<dt id="arg-d">d<a class="anchor" aria-label="anchor" href="#arg-d"></a></dt>
<dd><p>outside diameter of pipe (i.e.diameter of acceptor's incoming edge),
[<em>mm</em>]. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-wth">wth<a class="anchor" aria-label="anchor" href="#arg-wth"></a></dt>
<dd><p>wall thickness of pipe, [<em>mm</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-len">len<a class="anchor" aria-label="anchor" href="#arg-len"></a></dt>
<dd><p>pipe length (i.e. length of acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-loss">loss<a class="anchor" aria-label="anchor" href="#arg-loss"></a></dt>
<dd><p>user-provided value of <em>specific heat loss</em> power for each pipe in
tracing path, [<em>kcal/m/h</em>]. Values of the argument can be obtained
experimentally, or taken from regulatory documents.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-roughness">roughness<a class="anchor" aria-label="anchor" href="#arg-roughness"></a></dt>
<dd><p>roughness of internal wall of pipe (i.e. acceptor's incoming edge),
[<em>m</em>]. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-inlet">inlet<a class="anchor" aria-label="anchor" href="#arg-inlet"></a></dt>
<dd><p>elevation of pipe inlet, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-outlet">outlet<a class="anchor" aria-label="anchor" href="#arg-outlet"></a></dt>
<dd><p>elevation of pipe outlet, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-elev-tol">elev_tol<a class="anchor" aria-label="anchor" href="#arg-elev-tol"></a></dt>
<dd><p>maximum allowed discrepancy between adjacent outlet and inlet elevations
of two subsequent pipes in the traced path, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkNumber.html" class="external-link">assert_number</a></code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>method of determining <em>Darcy friction factor</em>:</p><ul><li><p><code>romeo</code></p></li>
<li><p><code>vatankhah</code></p></li>
<li><p><code>buzzelli</code></p></li>
</ul><p>Type: <code><a href="https://mllg.github.io/checkmate/reference/checkChoice.html" class="external-link">assert_choice</a></code>.
For more details see <code><a href="dropp.html">dropp</a></code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical indicator: should they watch tracing process on console?
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkFlag.html" class="external-link">assert_flag</a></code>.</p></dd>


<dt id="arg-csv">csv<a class="anchor" aria-label="anchor" href="#arg-csv"></a></dt>
<dd><p>logical indicator: should they incrementally dump results to <em>csv</em>-
file while tracing?
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkFlag.html" class="external-link">assert_flag</a></code>.</p></dd>


<dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>name of <em>csv</em>-file which they dump results to.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code> of length 1 that can be
used safely to create a file and write to it.</p></dd>


<dt id="arg-use-cluster">use_cluster<a class="anchor" aria-label="anchor" href="#arg-use-cluster"></a></dt>
<dd><p>utilize functionality of parallel processing on multi-core CPU.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkFlag.html" class="external-link">assert_flag</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> containing results (detailed log) of tracing in
   <a href="https://en.wikipedia.org/wiki/Wide_and_narrow_data" class="external-link">narrow format</a>:</p><dl><dt><code>node</code></dt>
<dd><p><em>Tracing job</em>. Identifier of the node which regime parameters is
        calculated for. Values in this vector are identical to those in
        argument <code>acceptor</code>.
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code>.</p></dd>


      <dt><code>tracing</code></dt>
<dd><p><em>Tracing job</em>. Identifiers of nodes from which regime parameters
        are traced for the given node. Identifier <code>sensor</code> is used when
        values of regime parameters for the node are sensor readings.
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code>.</p></dd>


      <dt><code>backward</code></dt>
<dd><p><em>Tracing job</em>. Identifier of tracing direction. It constantly
        equals to <code>FALSE</code>.
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkLogical.html" class="external-link">assert_logical</a></code>.</p></dd>


      <dt><code>aggregation</code></dt>
<dd><p><em>Tracing job</em>. Identifier of the aggregation method associated
        with traced values. For forward tracing the only option is
        <code>identity</code>.
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code>.</p></dd>


      <dt><code>loss</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative specific heat loss
        power of adjacent pipe, [<em>kcal/m/h</em>].
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


      <dt><code>flux</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative heat flux of
        adjacent pipe, [<em>W/m²</em>].
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


      <dt><code>Q</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative heat loss of
        adjacent pipe per day, [<em>kcal</em>].
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code>.</p></dd>


      <dt><code>temperature</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
        carrier (water) that is associated with the node, [<em>°C</em>].
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


      <dt><code>pressure</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
        carrier (water) that is associated with the node, [<em>MPa</em>].
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


      <dt><code>flow_rate</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
         carrier (water) that is associated with the node, [<em>ton/h</em>].
         Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


      <dt><code>job</code></dt>
<dd><p><em>Tracing job</em>. Value of tracing job counter.
         For forward tracing value of <code>job</code> counts the number of traced
         paths from root node.
         Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCount.html" class="external-link">assert_count</a></code>.</p></dd>


</dl><p>Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDataFrame.html" class="external-link">assert_data_frame</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>They consider the topology of district heating network represented by
 <code><a href="m325nxdata.html">m325nxdata</a></code>:</p>
<p><img src="figures/tracefw.png" alt=""></p>
<p>Tracing starts from sensor-equipped root node and goes forward, i.e along
 the flow direction. Function <code><a href="traceline.html">traceline</a></code> serves under the
 hood for tracing identified linear segments from root node to every
 terminal node. Hence they only need root node to be equipped with sensors.
 Sensors at other nodes are redundant in forward tracing, since the tracing
 algorithm by no means consider them for tracing.</p>
<p>Moreover in the forward tracing algorithm they assume the flow of heat
 carrier is distributed proportionally to the cross-sectional area of the
 outgoing pipeline. Actually, a lot of reasons may cause significant
 deviations from this assumption. As a result, the sequence of paired
 backward/forward tracing may be divergent for regime parameters.</p>
<p>Though some input arguments are natively vectorized their individual values
 all relate to common part of district heating network, i.e. associated with
 common object. It is due to isomorphism between vector representation and
 directed graph of this network. For more details of isomorphic topology
 description see <code><a href="m325nxdata.html">m325nxdata</a></code>.</p>
<p>They are welcome to couple the algorithm with functionality of
 <a href="https://CRAN.R-project.org/package=data.table" class="external-link">data.table</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Regime tracing:
<code><a href="dropg.html">dropg</a>()</code>,
<code><a href="dropp.html">dropp</a>()</code>,
<code><a href="dropt.html">dropt</a>()</code>,
<code><a href="m325tracebw.html">m325tracebw</a>()</code>,
<code><a href="m325tracefw.html">m325tracefw</a>()</code>,
<code><a href="m325traceline.html">m325traceline</a>()</code>,
<code><a href="tracebw.html">tracebw</a>()</code>,
<code><a href="traceline.html">traceline</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://omega1x.github.io/pipenostics/">pipenostics</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Minimum two nodes should be in district heating network graph:</span></span></span>
<span class="r-in"><span><span class="fu">tracefw</span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   node tracing backward aggregation loss     flux        Q temperature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1  sensor    FALSE    identity   NA       NA       NA    70.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    2       1    FALSE    identity 78.4 290.2324 136314.4    69.71603</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    pressure flow_rate job</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.5883990        20   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.5704644        20   1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Consider isomorphic representation of District Heating Network graph:</span></span></span>
<span class="r-in"><span><span class="va">DHN</span> <span class="op">&lt;-</span> <span class="va">m325nxdata</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * remove irrelevant parameters from the test bench:</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"year"</span>, <span class="st">"insulation"</span>, <span class="st">"laying"</span>, <span class="st">"beta"</span>, <span class="st">"exp5k"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature"</span>, <span class="st">"pressure"</span>, <span class="st">"flow_rate"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA_real_</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * avoid using numeric identifiers for nodes:</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">$</span><span class="va">sender</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"N%02i"</span>, <span class="va">DHN</span><span class="op">$</span><span class="va">sender</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">$</span><span class="va">acceptor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"N%02i"</span>, <span class="va">DHN</span><span class="op">$</span><span class="va">acceptor</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * provide current regime parameters for root node:</span></span></span>
<span class="r-in"><span><span class="va">root_node</span> <span class="op">&lt;-</span> <span class="fl">12</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">[</span><span class="va">root_node</span>, <span class="st">"temperature"</span><span class="op">]</span> <span class="op">&lt;-</span>  <span class="fl">70.4942576978</span>  <span class="co"># [°C]</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">[</span><span class="va">root_node</span>, <span class="st">"pressure"</span><span class="op">]</span>    <span class="op">&lt;-</span>   <span class="fl">0.6135602014</span>  <span class="co"># [MPa]</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">[</span><span class="va">root_node</span>, <span class="st">"flow_rate"</span><span class="op">]</span>   <span class="op">&lt;-</span> <span class="fl">274.0</span>           <span class="co"># [ton/h]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">root_node</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * provide actual values of specific heat loss power, [kcal/m/h], for each</span></span></span>
<span class="r-in"><span><span class="co"># segment N01 - N26. Since N12 is a root node, the specific heat loss</span></span></span>
<span class="r-in"><span><span class="co"># power for this acceptor is set to 0 (or may be any other numeric value).</span></span></span>
<span class="r-in"><span><span class="va">actual_loss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fl">96.8</span>,  <span class="fl">96.8</span>,  <span class="fl">71.2</span>, <span class="fl">116.7</span>, <span class="fl">71.3</span>,  <span class="fl">96.8</span>, <span class="fl">78.5</span>, <span class="fl">116.7</span>, <span class="fl">28.6</span>, <span class="fl">24.5</span>,</span></span>
<span class="r-in"><span> <span class="fl">116.7</span>,   <span class="fl">0.0</span>, <span class="fl">153.2</span>,  <span class="fl">96.8</span>, <span class="fl">96.8</span>, <span class="fl">116.7</span>, <span class="fl">24.5</span>, <span class="fl">116.7</span>, <span class="fl">28.6</span>, <span class="fl">96.8</span>,</span></span>
<span class="r-in"><span>  <span class="fl">78.5</span>, <span class="fl">116.7</span>,  <span class="fl">71.3</span>,  <span class="fl">96.8</span>, <span class="fl">96.8</span>,  <span class="fl">71.1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Trace the test bench forward for the first time:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"tracefw"</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">DHN</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loss <span class="op">=</span> <span class="va">actual_loss</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, elev_tol <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    node tracing backward aggregation  loss     flux         Q temperature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   N12  sensor    FALSE    identity    NA       NA        NA    70.49426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   N13     N12    FALSE    identity 153.2 189.6782 363201.66    70.43903</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   N11     N13    FALSE    identity 116.7 216.0084  84024.00    70.40629</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   N08     N11    FALSE    identity 116.7 216.0084  84024.00    70.37151</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   N04     N08    FALSE    identity 116.7 216.0084  39981.42    70.34565</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   N01     N04    FALSE    identity  96.8 238.8988  92567.90    70.22589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  N02     N04    FALSE    identity  96.8 238.8988  92567.90    70.22589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41  N06     N08    FALSE    identity  96.8 238.8988 140514.11    70.20993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51  N05     N06    FALSE    identity  71.3 329.9358  61890.68    69.95637</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61  N03     N05    FALSE    identity  71.2 329.4730 132045.81    69.41539</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52  N07     N06    FALSE    identity  78.5 290.6026 136488.26    69.85206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53  N09     N06    FALSE    identity  28.6 132.3445  20646.23    70.12534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31  N10     N11    FALSE    identity  24.5 181.3953  12873.08    70.32103</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21  N14     N13    FALSE    identity  96.8 238.8988 158721.02    70.32909</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32  N15     N14    FALSE    identity  96.8 238.8988 184787.33    70.20109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22  N16     N13    FALSE    identity 116.7 216.0084  84024.00    70.40629</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33  N17     N16    FALSE    identity  24.5 181.3953  12873.08    70.32103</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34  N18     N16    FALSE    identity 116.7 216.0084  86292.65    70.37057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42  N20     N18    FALSE    identity  96.8 238.8988 155101.48    70.19221</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54  N19     N20    FALSE    identity  28.6 132.3445  35673.58    70.04606</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55  N21     N20    FALSE    identity  78.5 290.6026 136488.26    69.83434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43  N22     N18    FALSE    identity 116.7 216.0084  86292.65    70.31475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56  N24     N22    FALSE    identity  96.8 238.8988  59137.06    70.23825</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57  N25     N22    FALSE    identity  96.8 238.8988  59137.06    70.23825</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58  N23     N20    FALSE    identity  71.3 329.9358  88934.49    69.82786</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62  N26     N23    FALSE    identity  71.1 329.0103 131860.35    69.28763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     pressure  flow_rate job</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.6135602 274.000000   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.5979750 274.000000   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.5939089 106.926829   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.5903066 100.637016   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.5896032  64.407690   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.5873626  32.203845   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 0.5873626  32.203845   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41 0.5831283  36.229326   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51 0.5745519  10.169635   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61 0.5603297  10.169635   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52 0.5694825  15.890055   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53 0.5775906  10.169635   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 0.5645381   6.289813   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 0.5846161  60.146341   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 0.5690643  60.146341   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 0.5939089 106.926829   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 0.5645381   6.289813   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 0.5902093 100.637016   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42 0.5854615  36.229326   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54 0.5758935  10.169635   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55 0.5766115  15.890055  10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43 0.5886914  64.407690  11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56 0.5872599  32.203845  11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57 0.5872599  32.203845  12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58 0.5710985  10.169635  13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62 0.5568771  10.169635  13</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yuri Possokhov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

