<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Massively trace backwards thermal-hydraulic regime for district heating network — tracebw • pipenostics</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Massively trace backwards thermal-hydraulic regime for district heating network — tracebw"><meta name="description" content="Trace values of thermal-hydraulic regime (temperature, pressure,
 flow rate, and other) in the bunched pipeline against the flow direction
 using user-provided values of specific heat loss power.
Algorithm also suits for partially measurable district heating network with
 massive data lack conditions, when there are no temperature and pressure
 sensor readings on the majority of terminal nodes."><meta property="og:description" content="Trace values of thermal-hydraulic regime (temperature, pressure,
 flow rate, and other) in the bunched pipeline against the flow direction
 using user-provided values of specific heat loss power.
Algorithm also suits for partially measurable district heating network with
 massive data lack conditions, when there are no temperature and pressure
 sensor readings on the majority of terminal nodes."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pipenostics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pipenostics.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/FailureEstimation.html">Pipeline Failure Estimation</a></li>
    <li><a class="dropdown-item" href="../articles/RegimeTracing.html">District Heating Regime Tracing</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/omega1x/pipenostics/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Massively trace backwards thermal-hydraulic regime for district heating network</h1>
      <small class="dont-index">Source: <a href="https://github.com/omega1x/pipenostics/blob/HEAD/R/tracebw.R" class="external-link"><code>R/tracebw.R</code></a></small>
      <div class="d-none name"><code>tracebw.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Trace values of thermal-hydraulic regime (temperature, pressure,
 flow rate, and other) in the bunched pipeline against the flow direction
 using user-provided values of <em>specific heat loss power</em>.</p>
<p>Algorithm also suits for partially measurable district heating network with
 massive data lack conditions, when there are no temperature and pressure
 sensor readings on the majority of terminal nodes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tracebw</span><span class="op">(</span></span>
<span>  sender <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  acceptor <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  temperature <span class="op">=</span> <span class="fl">70</span>,</span>
<span>  pressure <span class="op">=</span> <span class="fu">pipenostics</span><span class="fu">::</span><span class="fu"><a href="mpa_kgf.html">mpa_kgf</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  flow_rate <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  d <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  wth <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  len <span class="op">=</span> <span class="fl">72.446</span>,</span>
<span>  loss <span class="op">=</span> <span class="fl">78.4</span>,</span>
<span>  roughness <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>  inlet <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  outlet <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"romeo"</span>,</span>
<span>  opinion <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  csv <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"tracebw.csv"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sender">sender<a class="anchor" aria-label="anchor" href="#arg-sender"></a></dt>
<dd><p>identifier of the node which heat carrier flows out.
Type: any type that can be painlessly coerced to character by
<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></code>.</p></dd>


<dt id="arg-acceptor">acceptor<a class="anchor" aria-label="anchor" href="#arg-acceptor"></a></dt>
<dd><p>identifier of the node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique for every row.
Type: any type that can be painlessly coerced to character by
<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></code>.</p></dd>


<dt id="arg-temperature">temperature<a class="anchor" aria-label="anchor" href="#arg-temperature"></a></dt>
<dd><p>sensor-measured temperature of heat carrier (water) sensor-measured on
the terminal acceptor node, [<em>°C</em>].
Use <code>NA_float_</code>s for (terminal) nodes without temperature sensor.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-pressure">pressure<a class="anchor" aria-label="anchor" href="#arg-pressure"></a></dt>
<dd><p>sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute" class="external-link">
absolute pressure</a> of heat carrier (water) inside the pipe (i.e.
acceptor's incoming edge), [<em>MPa</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-flow-rate">flow_rate<a class="anchor" aria-label="anchor" href="#arg-flow-rate"></a></dt>
<dd><p>sensor-measured amount of heat carrier (water) on terminal node that is
transferred by pipe (i.e. acceptor's incoming edge) during a period,
[<em>ton/h</em>]. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.
Use <code>NA_float_</code>s for nodes without flow rate sensor.</p></dd>


<dt id="arg-d">d<a class="anchor" aria-label="anchor" href="#arg-d"></a></dt>
<dd><p>outside diameter of pipe (i.e.diameter of acceptor's incoming edge),
[<em>mm</em>]. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-wth">wth<a class="anchor" aria-label="anchor" href="#arg-wth"></a></dt>
<dd><p>wall thickness of pipe, [<em>mm</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-len">len<a class="anchor" aria-label="anchor" href="#arg-len"></a></dt>
<dd><p>pipe length (i.e. length of acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-loss">loss<a class="anchor" aria-label="anchor" href="#arg-loss"></a></dt>
<dd><p>user-provided value of <em>specific heat loss</em> power for each pipe,
[<em>kcal/m/h</em>]. Values of the argument can be obtained experimentally,
or taken from regulatory documents.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-roughness">roughness<a class="anchor" aria-label="anchor" href="#arg-roughness"></a></dt>
<dd><p>roughness of internal wall of pipe (i.e. acceptor's incoming edge),
[<em>m</em>]. Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-inlet">inlet<a class="anchor" aria-label="anchor" href="#arg-inlet"></a></dt>
<dd><p>elevation of pipe inlet, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-outlet">outlet<a class="anchor" aria-label="anchor" href="#arg-outlet"></a></dt>
<dd><p>elevation of pipe outlet, [<em>m</em>].
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>method of determining <em>Darcy friction factor</em>:</p><ul><li><p><code>romeo</code></p></li>
<li><p><code>vatankhah</code></p></li>
<li><p><code>buzzelli</code></p></li>
</ul><p>Type: <code><a href="https://mllg.github.io/checkmate/reference/checkChoice.html" class="external-link">assert_choice</a></code>.
For more details see <code><a href="dropp.html">dropp</a></code>.</p></dd>


<dt id="arg-opinion">opinion<a class="anchor" aria-label="anchor" href="#arg-opinion"></a></dt>
<dd><p>method for aggregating values of regime parameters on each node for the
next tracing step:</p><dl><dt><code>mean</code></dt>
<dd><p>values of parameter are averaged before the next
   tracing step</p></dd>

   <dt><code>median</code></dt>
<dd><p>median of parameter values are used for the next
   tracing step</p></dd>


</dl><p>Type: <code><a href="https://mllg.github.io/checkmate/reference/checkChoice.html" class="external-link">assert_choice</a></code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical indicator: should they watch tracing process on console?
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkFlag.html" class="external-link">assert_flag</a></code>.</p></dd>


<dt id="arg-csv">csv<a class="anchor" aria-label="anchor" href="#arg-csv"></a></dt>
<dd><p>logical indicator: should they incrementally dump results to <em>csv</em>-
file while tracing?
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkFlag.html" class="external-link">assert_flag</a></code>.</p></dd>


<dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>name of <em>csv</em>-file which they dump results to.
Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code> of length 1 that can be
used safely to create a file and write to it.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> containing results (detailed log) of tracing in
   <a href="https://en.wikipedia.org/wiki/Wide_and_narrow_data" class="external-link">narrow format</a>:</p><dl><dt><code>node</code></dt>
<dd><p><em>Tracing job</em>. Identifier of the node which regime parameters is
        calculated for. Values in this vector are identical to those in
        argument <code>acceptor</code>.
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code>.</p></dd>


      <dt><code>tracing</code></dt>
<dd><p><em>Tracing job</em>. Identifiers of nodes from which regime parameters
        are traced for the given node. Identifier <code>sensor</code> is used when
        values of regime parameters for the node are sensor readings.
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code>.</p></dd>


      <dt><code>backward</code></dt>
<dd><p><em>Tracing job</em>. Identifier of tracing direction. It constantly
         equals to <code>TRUE</code>.
         Type: <code><a href="https://mllg.github.io/checkmate/reference/checkLogical.html" class="external-link">assert_logical</a></code>.</p></dd>


      <dt><code>aggregation</code></dt>
<dd><p><em>Tracing job</em>. Identifier of aggregation method: <em>span</em>,
         <em>median</em>, <em>mean</em>, or <em>identity</em>.
         Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code>.</p></dd>

      <dt><code>loss</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative specific heat loss
         power of adjacent pipe, [<em>kcal/m/h</em>].
         Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>

      <dt><code>flux</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative heat flux of
         adjacent pipe, [<em>W/m²</em>].
         Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>

      <dt><code>Q</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Normative heat loss of
        adjacent pipe per day, [<em>kcal</em>].
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCharacter.html" class="external-link">assert_character</a></code>.</p></dd>


      <dt><code>temperature</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
        carrier (water) that is associated with the node, [<em>°C</em>].
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


      <dt><code>pressure</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
        carrier (water) that is associated with the node, [<em>MPa</em>].
        Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


      <dt><code>flow_rate</code></dt>
<dd><p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
         carrier (water) that is associated with the node, [<em>ton/h</em>].
         Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDouble.html" class="external-link">assert_double</a></code>.</p></dd>


      <dt><code>job</code></dt>
<dd><p><em>Tracing job</em>. Value of tracing job counter.
         Type: <code><a href="https://mllg.github.io/checkmate/reference/checkCount.html" class="external-link">assert_count</a></code>.</p></dd>


</dl><p>Type: <code><a href="https://mllg.github.io/checkmate/reference/checkDataFrame.html" class="external-link">assert_data_frame</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>They consider the topology of district heating network represented by
 <code><a href="m325nxdata.html">m325nxdata</a></code>:</p>
<p><img src="figures/m325tracebw0.png" alt=""></p>
<p>The network may be partially sensor-equipped too:</p>
<p><img src="figures/m325tracebwp.png" alt=""></p>
<p>In latter case no more than two nodes must be equipped with pressure and
 temperature sensors whereas for other nodes only flow rate sensors must be
 installed.</p>
<p>Tracing starts from sensor-equipped nodes and goes backwards, i.e against
 the flow direction.</p>
<p>Though some input arguments are natively vectorized their individual values
 all relate to common part of district heating network, i.e. associated with
 common object. It is due to isomorphism between vector representation and
 directed graph of this network. For more details of isomorphic topology
 description see <code><a href="m325nxdata.html">m325nxdata</a></code>.</p>
<p>Before tracing starts for the next node, previously calculated values of
 thermal-hydraulic parameters are aggregated by either averaging or
 by median. The latter seems more robust for avoiding strong influence of
 possible outliers which may come from actual heating transfer anomalies,
 erroneous sensor readings or wrong pipeline specifications.</p>
<p>Aggregation for values of flow rate at the node is always <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Regime tracing:
<code><a href="dropg.html">dropg</a>()</code>,
<code><a href="dropp.html">dropp</a>()</code>,
<code><a href="dropt.html">dropt</a>()</code>,
<code><a href="m325tracebw.html">m325tracebw</a>()</code>,
<code><a href="m325tracefw.html">m325tracefw</a>()</code>,
<code><a href="m325traceline.html">m325traceline</a>()</code>,
<code><a href="tracefw.html">tracefw</a>()</code>,
<code><a href="traceline.html">traceline</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://omega1x.github.io/pipenostics/">pipenostics</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># It is possible to run without specification of argument values:</span></span></span>
<span class="r-in"><span><span class="fu">tracebw</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | start backward tracing; segments 1;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | start job; job 0;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | now process; 1 node(s); [7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | seen tracing; [1/1] are TP-sensor-equipped;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | tracing loss;;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | OK! Specific heat loss power traced from 1 nodes;[7];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | tracing heat flux;;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | OK! Heat flux traced from 1 nodes;[7];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | tracing heat loss per day;;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | OK! Heat loss per day traced from 1 nodes;[7];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | tracing temperature;;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | OK! Temperature traced from 1 nodes;[7];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | tracing pressure;;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | OK! Pressure traced from 1 nodes;[7];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | tracing flow_rate;;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | finish job; job 0; processed node(s) 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2025-09-19 11:38:17.204666 tracebw | finish backward tracing;;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        node tracing backward aggregation loss     flux        Q temperature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         7  sensor     TRUE    identity 78.4 290.2324 136314.4          70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> span      7  sensor     TRUE        span  0.0   0.0000      0.0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> median    7  sensor     TRUE      median 78.4 290.2324 136314.4          70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mean      7  sensor     TRUE        mean 78.4 290.2324 136314.4          70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        pressure flow_rate job</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      0.588399        20   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> span   0.000000        20   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> median 0.588399        20   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mean   0.588399        20   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Consider isomorphic representation of District Heating Network graph:</span></span></span>
<span class="r-in"><span><span class="va">DHN</span> <span class="op">&lt;-</span> <span class="va">m325nxdata</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * Adapt node identifiers for ordering representation simplification:</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">[[</span><span class="st">"sender"</span><span class="op">]</span><span class="op">]</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"N%02i"</span>, <span class="va">DHN</span><span class="op">[[</span><span class="st">"sender"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">DHN</span><span class="op">[[</span><span class="st">"acceptor"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"N%02i"</span>, <span class="va">DHN</span><span class="op">[[</span><span class="st">"acceptor"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * Provided actual values of specific heat loss power</span></span></span>
<span class="r-in"><span><span class="co">#   (say, field measurements) for each pipe in DHN, [kcal/m/h]:</span></span></span>
<span class="r-in"><span> <span class="va">actual_loss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fl">96.2360000000000</span>,  <span class="fl">96.2880000000000</span>,  <span class="fl">70.5840000000000</span>,</span></span>
<span class="r-in"><span>  <span class="fl">116.0449431257620</span>,  <span class="fl">70.7340165868372</span>,  <span class="fl">96.2114863150603</span>,</span></span>
<span class="r-in"><span>   <span class="fl">78.4000000000000</span>, <span class="fl">116.0158816197730</span>,  <span class="fl">28.1152000000000</span>,</span></span>
<span class="r-in"><span>   <span class="fl">24.9182000000000</span>, <span class="fl">116.6790503515620</span>, <span class="fl">152.8311474487970</span>,</span></span>
<span class="r-in"><span>  <span class="fl">152.7893321276950</span>,  <span class="fl">96.7331745004449</span>,  <span class="fl">96.6000000000000</span>,</span></span>
<span class="r-in"><span>  <span class="fl">116.6668284940720</span>,  <span class="fl">24.9596000000000</span>, <span class="fl">115.9228232554340</span>,</span></span>
<span class="r-in"><span>   <span class="fl">28.1658000000000</span>,  <span class="fl">96.1226072815915</span>,  <span class="fl">77.8240000000000</span>,</span></span>
<span class="r-in"><span>  <span class="fl">115.9455144867840</span>,  <span class="fl">70.6899252508703</span>,  <span class="fl">96.1840000000000</span>,</span></span>
<span class="r-in"><span>   <span class="fl">96.2360000000000</span>,  <span class="fl">70.5400000000000</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * Remove inappropriate attributes of the graph:</span></span></span>
<span class="r-in"><span><span class="va">DHN.1</span> <span class="op">&lt;-</span> <span class="va">DHN</span><span class="op">[</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">DHN</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"year"</span>, <span class="st">"insulation"</span>, <span class="st">"laying"</span>, <span class="st">"beta"</span>, <span class="st">"exp5k"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * Trace thermal-hydraulic regime for DHN:</span></span></span>
<span class="r-in"><span><span class="va">tracebw_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"tracebw"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">DHN.1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loss <span class="op">=</span> <span class="va">actual_loss</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * If the actual values of specific heat loss power presented above are</span></span></span>
<span class="r-in"><span><span class="co">#   close to those in Minenergo-325, then the results of regime tracing match</span></span></span>
<span class="r-in"><span><span class="co">#   the normative procedure:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m325_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"m325tracebw"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">DHN</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">tracebw_report</span><span class="op">$</span><span class="va">temperature</span>, <span class="va">m325_report</span><span class="op">$</span><span class="va">temperature</span>, tol <span class="op">=</span> <span class="fl">1e-4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">tracebw_report</span><span class="op">$</span><span class="va">pressure</span>,    <span class="va">m325_report</span><span class="op">$</span><span class="va">pressure</span>,    tol <span class="op">=</span> <span class="fl">1e-4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">tracebw_report</span><span class="op">$</span><span class="va">flow_rate</span>,   <span class="va">m325_report</span><span class="op">$</span><span class="va">flow_rate</span>,   tol <span class="op">=</span> <span class="fl">1e-4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yuri Possokhov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

